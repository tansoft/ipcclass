# IP-C-Class

IPCClass 是一个利用C类IP特性实现的性能非常高的IP查询工具。

## 特点

* IP属性查询，复杂度O(1)，直接内存指定偏移量即可获取IP属性。
* IP属性包括多级归属地，例如国家，省市，区等，包括运营商信息。
* IP相邻度计算，复杂度O(1)，通过单次异或操作可得出两个IP相邻度。
* IP相关属性计算，例如是否是一线城市，是否是小运营商等。
* 可根据自身需要定制数据，默认格式采用4个字节保存，占用64MB内存。

## 原理

* 一个IPv4的IP由32位/4个字节构成，标记成A.B.C.D，其中每一段范围是0～255。
* 本IP库精度到C类IP（CIDR：A.B.C.x/24），因为绝大多数运营商的IP段分配范围都不会比这个前缀更小了。
* 而这个C类IP前缀只有1678（256 * 256 * 256）万个，如果一个IP地址用1个字节表示它的属性，只需要16MB就能保存，并且通过偏移量可以直接取出。
* 每个IP的属性2个字节/16位，可以通过每个位进行多级位置表示，当比较IP相邻度时，可以通过异或操作，即可判断IP的相邻度（因为每级相同都为0，不同则为1）。

## 格式

可以根据自身需要进行定制，这里基于国内常用情况，进行划分。

|偏移(字节)|0|1|2|3|
|:---|:---|:---|:---|:---|
|偏移(位)|0|1|2|3|


<table>
    <tr>
        <th>班级</th><th>课程</th><th>平均分</th>
    </tr>
    <tr>
        <td rowspan="3">1班</td><td>语文</td><td>95</td>
    </tr>
    <tr>
        <td>数学</td><td>96</td>
    </tr>
    <tr>
        <td>英语</td><td>92</td>
    </tr>
</table>

```txt
32 bit 
16 bit ABBCCCDDEEEFFGGG
       A: 0代表国内
        B: 国内4大区块（例如：华北/华东(华中)/华南/西部）
          C: 每个区8个省（有些邻近省可以到D再进行划分）
             D: 省内4大区域
               E: 区域内8个市
                  F: 每个市4个县区
                    G: 8个运营商
       abbbcccdddeeeGGG
       a: 1代表国外
        b: 8大洲
           c: 大洲内8个大片区
              d: 片区内8个国家，不够的地区可以往后多用几位
                 e: 有些地区需要再细分可以再划分
                    g: 8个运营商

```

## 目录

```txt
data 数据文件
 + 
sdk 各种语言的sdk
server 提供查询服务
tools IP处理工具集
converter 其他IP库转换
```
